<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Bezier-Animation</title>
</head>
<style>
    body{
        margin: 0;
        padding: 2em;
        font-family: sans-serif;
        text-align: center;
    }

    #drawArea{
        background-color: #ececec;

        display: block;
        margin: 0 auto 0;

    }

    circle{
        stroke: #000000;
        stroke-width: 1;
    }

    text{
        font-size: 10px;
    }

</style>
<body>
<h2>Bezier-Animation</h2>
<svg id="drawArea" width="301" height="301">
    <defs>
        <pattern id="tenthGrid" width="10" height="10" patternUnits="userSpaceOnUse">
            <path d="M 10 0 L 0 0 0 10" fill="none" stroke="silver" stroke-width="0.5"/>
        </pattern>
    </defs>
    <rect width="100%" height="100%" fill="url(#tenthGrid)"/>

    <g stroke="gray" stroke-width="2" fill="none">
        <path class="lines" data-name="A,C" d="M 70 250 L 20 110"></path>
        <path class="lines" data-name="A,B" d="M 220 60 L 20 110"></path>
        <path class="lines" data-name="B,C" d="M 70 250 Q 20 110 220 60"></path>
    </g>

        <circle data-name="A" r="5" cx="20" cy="110" fill="green"></circle>
        <circle data-name="B" r="5" cx="220" cy="60" fill="blue"></circle>
        <circle data-name="C" r="5" cx="70" cy="250" fill="red"></circle>


</svg>
<script>
    window.addEventListener("load",()=>{
        const drawArea = document.getElementById("drawArea");
        const circles = document.getElementsByTagNameNS("http://www.w3.org/2000/svg", "circle");
        for(let c of circles){
            let m = move(c);
            c.addEventListener("mousedown", ()=>{
                drawArea.addEventListener("mousemove", m);
            });
            document.body.addEventListener("mouseup", ()=>{
                drawArea.removeEventListener("mousemove", m);
            });
        }
    });



    function move(c){
        return (e)=>{
            const cName = c.getAttribute("data-name");
            const paths = document.getElementsByClassName("lines");
            for(let p of paths){
                let pSplit = p.getAttribute("data-name").split(",");
                if(pSplit[0] == cName || pSplit[1] == cName){
                    p.setAttribute("stroke", "red");
                }
            }


            c.setAttribute("cx", e.offsetX);
            c.setAttribute("cy", e.offsetY);
        };
    };


</script>
</body>
</html>